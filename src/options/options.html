<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="extensionName"></title>
    <link rel="stylesheet" href="../assets/css/theme.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="../assets/vendor/material-components-web.min.css">
    <link rel="stylesheet" href="../assets/css/options.css">
    <script src="../assets/vendor/paypal/standard/client/html/src/app.js"></script>
</head>

<body class="options-body">

    <header class="options-header">
        <img src="../assets/icons/pcloud-icon.svg" alt="pCloud Logo" class="logo">
        <h1 data-i18n="extensionName"></h1>
    </header>

    <div class="options-container">
        <p class="page-description" data-i18n="options_description"></p>

        <div class="options-grid">
            <!-- Appearance Card -->
            <div class="mdc-card setting-card animated-card">
                <div class="card-header">
                    <h2 class="mdc-typography--headline6" data-i18n="options_section_appearance">Appearance</h2>
                </div>
                <div class="mdc-card__content">
                    <div class="setting-item">
                        <div class="mdc-select mdc-select--filled" id="theme-select">
                            <div class="mdc-select__anchor">
                                <span class="mdc-select__ripple"></span>
                                <span class="mdc-floating-label" data-i18n="options_theme_label"></span>
                                <span class="mdc-select__selected-text-container">
                                    <span class="mdc-select__selected-text"></span>
                                </span>
                                <span class="mdc-select__dropdown-icon">
                                    <svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5"
                                        focusable="false">
                                        <polygon class="mdc-select__dropdown-icon-inactive" stroke="none"
                                            fill-rule="evenodd" points="7 10 12 15 17 10"></polygon>
                                        <polygon class="mdc-select__dropdown-icon-active" stroke="none"
                                            fill-rule="evenodd" points="7 15 12 10 17 15"></polygon>
                                    </svg>
                                </span>
                                <span class="mdc-line-ripple"></span>
                            </div>

                            <div class="mdc-select__menu mdc-menu mdc-menu-surface">
                                <ul class="mdc-list">
                                    <li class="mdc-list-item" data-value="theme-googlestyle">
                                        <span class="mdc-list-item__ripple"></span>
                                        <span class="mdc-list-item__text" data-i18n="options_theme_googlestyle"></span>
                                    </li>
                                    <li class="mdc-list-item" data-value="theme-geek">
                                        <span class="mdc-list-item__ripple"></span>
                                        <span class="mdc-list-item__text" data-i18n="options_theme_geek"></span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Uploads Card -->
            <div class="mdc-card setting-card animated-card">
                <div class="card-header">
                    <h2 class="mdc-typography--headline6" data-i18n="options_section_uploads">Uploads</h2>
                </div>
                <div class="mdc-card__content">
                    <div class="setting-item">
                        <label data-i18n="options_default_folder_label"></label>
                        <div id="selected-folder-path" class="selected-path-display">/
                            <span id="dev-folder-id" class="dev-info hidden"></span>
                        </div>
                    </div>
                    <div id="folder-tree-container" class="folder-tree"></div>
                </div>
            </div>

            <!-- Premium Upgrade Card -->
            <div class="mdc-card setting-card animated-card premium-card" id="premium-card">
                <div class="card-header">
                    <h2 class="mdc-typography--headline6" data-i18n="options_section_premium">Premium Upgrade</h2>
                    <span class="premium-badge hidden" id="premium-status-badge"
                        data-i18n="options_premium_active">PREMIUM ACTIVE</span>
                </div>
                <div class="mdc-card__content">
                    <div id="premium-promo-content">
                        <p class="mdc-typography--body1" data-i18n="options_premium_description">Unlock advanced
                            features like Document Downloader (Markdown/Word) and more!</p>

                        <div class="pricing-selection-container">
                            <div class="mdc-form-field">
                                <div class="mdc-radio">
                                    <input class="mdc-radio__native-control" type="radio" id="tier-pcloud"
                                        name="pricing-tier" value="hf4pcloud" checked>
                                    <div class="mdc-radio__background">
                                        <div class="mdc-radio__outer-circle"></div>
                                        <div class="mdc-radio__inner-circle"></div>
                                    </div>
                                    <div class="mdc-radio__ripple"></div>
                                </div>
                                <label for="tier-pcloud">
                                    <span class="tier-name" data-i18n="options_tier_pcloud_name">HyperFetch for
                                        pCloud</span>
                                    <span class="tier-price">$1.99</span>
                                </label>
                            </div>
                            <div class="tier-details">
                                <small data-i18n="options_tier_pcloud_desc">Unlocks features for this extension
                                    only.</small>
                            </div>

                            <div class="mdc-form-field">
                                <div class="mdc-radio">
                                    <input class="mdc-radio__native-control" type="radio" id="tier-master"
                                        name="pricing-tier" value="hf4master">
                                    <div class="mdc-radio__background">
                                        <div class="mdc-radio__outer-circle"></div>
                                        <div class="mdc-radio__inner-circle"></div>
                                    </div>
                                    <div class="mdc-radio__ripple"></div>
                                </div>
                                <label for="tier-master">
                                    <span class="tier-name" data-i18n="options_tier_master_name">HyperFetch
                                        Master</span>
                                    <span class="tier-price">$5.00</span>
                                </label>
                            </div>
                            <div class="tier-details">
                                <small data-i18n="options_tier_master_desc">Unlocks ALL HyperFetch extensions (pCloud,
                                    S3, etc.).</small>
                            </div>
                        </div>

                        <div class="pricing-action">
                            <button id="upgrade-pcloud-btn" class="mdc-button mdc-button--raised upgrade-button">
                                <span class="mdc-button__ripple"></span>
                                <span class="mdc-button__label" data-i18n="options_upgrade_now">Upgrade Now</span>
                            </button>
                            <button id="upgrade-master-btn"
                                class="mdc-button mdc-button--raised upgrade-button upgrade-button--master">
                                <span class="mdc-button__ripple"></span>
                                <span class="mdc-button__label" data-i18n="options_upgrade_now">Upgrade Now</span>
                            </button>
                            <p id="result-message" class="upgrade-hint"></p>
                        </div>

                        <div class="restore-purchase-container">
                            <button id="restore-purchase-btn" class="mdc-button">
                                <span class="mdc-button__ripple"></span>
                                <span class="mdc-button__label" data-i18n="options_restore_purchase">Restore
                                    Purchase</span>
                            </button>
                        </div>
                    </div>

                    <div id="premium-active-content" class="hidden">
                        <div class="premium-success-message">
                            <span class="material-icons success-icon">verified</span>
                            <h3 class="mdc-typography--headline5" data-i18n="options_premium_thank_you">Thank you for
                                your support!</h3>
                            <p class="mdc-typography--body1" data-i18n="options_premium_active_desc">You have access to
                                all premium features.</p>
                            <p class="mdc-typography--body2 current-plan-info">Current Plan: <span
                                    id="current-plan-name"></span></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Domain Rules Card -->
            <div class="mdc-card setting-card animated-card">
                <div class="card-header">
                    <div class="header-title-group">
                        <h2 class="mdc-typography--headline6" data-i18n="options_domain_rules_title">Upload Path by
                            Domain</h2>
                        <button id="domain-rules-help-btn" class="mdc-icon-button material-icons"
                            data-i18n-title="options_domain_rules_help_icon_tooltip">help_outline</button>
                    </div>
                    <div class="header-actions">
                        <button id="test-playground-toggle-btn" class="mdc-button mdc-button--outlined">
                            <span class="mdc-button__ripple"></span>
                            <span class="mdc-button__label" data-i18n="options_domain_rules_test_playground_title">Test
                                Playground</span>
                        </button>
                        <button id="add-rule-btn" class="mdc-button mdc-button--raised">
                            <span class="mdc-button__ripple"></span>
                            <span class="mdc-button__label" data-i18n="options_domain_rules_add_button">Add Rule</span>
                        </button>
                    </div>
                </div>

                <div id="test-playground" class="test-playground hidden">
                    <div class="mdc-text-field mdc-text-field--outlined w-100">
                        <input type="text" id="test-url-input" class="mdc-text-field__input">
                        <span class="mdc-notched-outline">
                            <span class="mdc-notched-outline__leading"></span>
                            <span class="mdc-notched-outline__notch">
                                <span class="mdc-floating-label" data-i18n="options_domain_rules_test_placeholder">Enter
                                    URL to test rules...</span>
                            </span>
                            <span class="mdc-notched-outline__trailing"></span>
                        </span>
                    </div>
                    <div id="test-result" class="test-result"></div>
                </div>

                <div class="mdc-card__content">
                    <div class="mdc-data-table">
                        <div class="mdc-data-table__table-container">
                            <table class="mdc-data-table__table" aria-label="Domain Rules">
                                <thead>
                                    <tr class="mdc-data-table__header-row">
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Status
                                        </th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col"
                                            data-i18n="options_domain_rules_col_domain">Domain</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col"
                                            data-i18n="options_domain_rules_col_path">Path</th>
                                        <th class="mdc-data-table__header-cell" role="columnheader" scope="col">Actions
                                        </th>
                                    </tr>
                                </thead>
                                <tbody class="mdc-data-table__content" id="domain-rules-list">
                                    <!-- Rules will be dynamically generated -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Rule Editor Dialog -->
            <div class="mdc-dialog" id="rule-editor-dialog">
                <div class="mdc-dialog__container">
                    <div class="mdc-dialog__surface" role="alertdialog" aria-modal="true">
                        <h2 class="mdc-dialog__title" id="rule-editor-title">Edit Rule</h2>
                        <div class="mdc-dialog__content">
                            <div class="rule-editor-form">
                                <div class="mdc-text-field mdc-text-field--outlined w-100">
                                    <input type="text" id="rule-domain-input" class="mdc-text-field__input">
                                    <span class="mdc-notched-outline">
                                        <span class="mdc-notched-outline__leading"></span>
                                        <span class="mdc-notched-outline__notch">
                                            <span class="mdc-floating-label"
                                                data-i18n="options_domain_rules_col_domain">Domain</span>
                                        </span>
                                        <span class="mdc-notched-outline__trailing"></span>
                                    </span>
                                </div>
                                <div class="path-input-group">
                                    <div class="mdc-text-field mdc-text-field--outlined w-100">
                                        <input type="text" id="rule-path-input" class="mdc-text-field__input" readonly>
                                        <input type="hidden" id="rule-folder-id-input">
                                        <span class="mdc-notched-outline">
                                            <span class="mdc-notched-outline__leading"></span>
                                            <span class="mdc-notched-outline__notch">
                                                <span class="mdc-floating-label"
                                                    data-i18n="options_domain_rules_col_path">Path</span>
                                            </span>
                                            <span class="mdc-notched-outline__trailing"></span>
                                        </span>
                                    </div>
                                    <button id="rule-folder-picker-btn"
                                        class="mdc-icon-button material-icons">create_new_folder</button>
                                </div>
                            </div>
                        </div>
                        <div class="mdc-dialog__actions">
                            <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="close">
                                <div class="mdc-button__ripple"></div>
                                <span class="mdc-button__label" data-i18n="options_dialog_cancel">Cancel</span>
                            </button>
                            <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="save">
                                <div class="mdc-button__ripple"></div>
                                <span class="mdc-button__label" data-i18n="options_dialog_save">Save</span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="mdc-dialog__scrim"></div>
            </div>

            <!-- Folder Picker Dialog -->
            <div class="mdc-dialog" id="folder-picker-dialog">
                <div class="mdc-dialog__container">
                    <div class="mdc-dialog__surface" role="alertdialog" aria-modal="true">
                        <h2 class="mdc-dialog__title" data-i18n="options_folder_picker_title">Select Folder</h2>
                        <div class="mdc-dialog__content">
                            <div id="picker-folder-tree" class="folder-tree"></div>
                            <div class="create-folder-group">
                                <div class="mdc-text-field mdc-text-field--outlined mdc-text-field--dense">
                                    <input type="text" id="new-folder-name-input" class="mdc-text-field__input">
                                    <span class="mdc-notched-outline">
                                        <span class="mdc-notched-outline__leading"></span>
                                        <span class="mdc-notched-outline__trailing"></span>
                                    </span>
                                </div>
                                <button id="create-folder-btn" class="mdc-button mdc-button--outlined">
                                    <span class="mdc-button__ripple"></span>
                                    <span class="mdc-button__label"
                                        data-i18n="options_domain_rules_folder_picker_create_btn">Create</span>
                                </button>
                            </div>
                            <div id="premium-promo-content">
                                <p class="mdc-typography--body1" data-i18n="options_premium_description">Unlock advanced
                                    features like Document Downloader (Markdown/Word) and more!</p>

                                <div class="pricing-selection-container">
                                    <div class="mdc-form-field">
                                        <div class="mdc-radio">
                                            <input class="mdc-radio__native-control" type="radio" id="tier-pcloud"
                                                name="pricing-tier" value="hf4pcloud" checked>
                                            <div class="mdc-radio__background">
                                                <div class="mdc-radio__outer-circle"></div>
                                                <div class="mdc-radio__inner-circle"></div>
                                            </div>
                                            <div class="mdc-radio__ripple"></div>
                                        </div>
                                        <label for="tier-pcloud">
                                            <span class="tier-name" data-i18n="options_tier_pcloud_name">HyperFetch for
                                                pCloud</span>
                                            <span class="tier-price">$1.99</span>
                                        </label>
                                    </div>
                                    <div class="tier-details">
                                        <small data-i18n="options_tier_pcloud_desc">Unlocks features for this extension
                                            only.</small>
                                    </div>

                                    <div class="mdc-form-field">
                                        <div class="mdc-radio">
                                            <input class="mdc-radio__native-control" type="radio" id="tier-master"
                                                name="pricing-tier" value="hf4master">
                                            <div class="mdc-radio__background">
                                                <div class="mdc-radio__outer-circle"></div>
                                                <div class="mdc-radio__inner-circle"></div>
                                            </div>
                                            <div class="mdc-radio__ripple"></div>
                                        </div>
                                        <label for="tier-master">
                                            <span class="tier-name" data-i18n="options_tier_master_name">HyperFetch
                                                Master</span>
                                            <span class="tier-price">$5.00</span>
                                        </label>
                                    </div>
                                    <div class="tier-details">
                                        <small data-i18n="options_tier_master_desc">Unlocks ALL HyperFetch extensions
                                            (pCloud, S3, etc.).</small>
                                    </div>
                                </div>

                                <div class="pricing-action">
                                    <div id="paypal-button-container"></div>
                                    <p id="result-message"></p>
                                </div>

                                <div class="restore-purchase-container">
                                    <button id="restore-purchase-btn" class="mdc-button">
                                        <span class="mdc-button__ripple"></span>
                                        <span class="mdc-button__label" data-i18n="options_restore_purchase">Restore
                                            Purchase</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="mdc-dialog__actions">
                            <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="close">
                                <div class="mdc-button__ripple"></div>
                                <span class="mdc-button__label" data-i18n="options_dialog_cancel">Cancel</span>
                            </button>
                            <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="select">
                                <div class="mdc-button__ripple"></div>
                                <span class="mdc-button__label" data-i18n="options_dialog_select">Select</span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="mdc-dialog__scrim"></div>
            </div>

            <!-- Help Dialog -->
            <div class="mdc-dialog" id="help-dialog">
                <div class="mdc-dialog__container">
                    <div class="mdc-dialog__surface" role="alertdialog" aria-modal="true">
                        <h2 class="mdc-dialog__title" data-i18n="options_domain_rules_help_dialog_title">Rule Priority
                            Help</h2>
                        <div class="mdc-dialog__content" data-i18n="options_domain_rules_help_dialog_content">
                            Rules are matched from top to bottom...
                        </div>
                        <div class="mdc-dialog__actions">
                            <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="close">
                                <div class="mdc-button__ripple"></div>
                                <span class="mdc-button__label" data-i18n="options_dialog_ok">OK</span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="mdc-dialog__scrim"></div>
            </div>

            <!-- Image Filename Config Card -->
            <div class="mdc-card setting-card animated-card">
                <div class="card-header">
                    <h2 class="mdc-typography--headline6" data-i18n="options_section_filename">Image Filename</h2>
                </div>
                <div class="mdc-card__content">
                    <p class="mdc-typography--body2" data-i18n="options_filename_description">Drag and drop to reorder
                        filename parts. Uncheck to exclude.</p>
                    <ul id="filename-parts-list" class="filename-parts-list">
                        <!-- Parts will be dynamically generated by options.js -->
                    </ul>
                    <div class="filename-preview-container">
                        <span class="mdc-typography--overline">Preview:</span>
                        <span id="filename-preview" class="filename-preview"></span>
                    </div>
                </div>
            </div>

            <!-- Text Filename Config Card -->
            <div class="mdc-card setting-card animated-card">
                <div class="card-header">
                    <h2 class="mdc-typography--headline6" data-i18n="options_section_text_filename">Text Filename</h2>
                </div>
                <div class="mdc-card__content">
                    <p class="mdc-typography--body2" data-i18n="options_filename_description">Drag and drop to reorder
                        filename parts. Uncheck to exclude.</p>
                    <ul id="text-filename-parts-list" class="filename-parts-list">
                        <!-- Parts will be dynamically generated by options.js -->
                    </ul>
                    <div class="filename-preview-container">
                        <span class="mdc-typography--overline">Preview:</span>
                        <span id="text-filename-preview" class="filename-preview"></span>
                    </div>

                    <hr class="mdc-list-divider">

                    <!-- Metadata Checkbox -->
                    <div class="setting-item">
                        <div class="mdc-form-field">
                            <div class="mdc-checkbox">
                                <input type="checkbox" class="mdc-checkbox__native-control"
                                    id="text-include-metadata" />
                                <div class="mdc-checkbox__background">
                                    <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
                                        <path class="mdc-checkbox__checkmark-path" fill="none"
                                            d="M1.73,12.91 8.1,19.28 22.79,4.59" />
                                    </svg>
                                    <div class="mdc-checkbox__mixedmark"></div>
                                </div>
                                <div class="mdc-checkbox__ripple"></div>
                            </div>
                            <label for="text-include-metadata" data-i18n="options_text_include_metadata_label">Include
                                Metadata (YAML Frontmatter)</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Document Downloader Config Card -->
            <div class="mdc-card setting-card animated-card">
                <div class="card-header">
                    <h2 class="mdc-typography--headline6" data-i18n="options_section_document_downloader">Document
                        Downloader</h2>
                </div>
                <div class="mdc-card__content">
                    <!-- Format Selection -->
                    <div class="setting-item">
                        <div class="mdc-select mdc-select--filled" id="doc-format-select">
                            <div class="mdc-select__anchor">
                                <span class="mdc-select__ripple"></span>
                                <span class="mdc-floating-label" data-i18n="options_document_format_label">Document
                                    Format</span>
                                <span class="mdc-select__selected-text-container">
                                    <span class="mdc-select__selected-text"></span>
                                </span>
                                <span class="mdc-select__dropdown-icon">
                                    <svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5"
                                        focusable="false">
                                        <polygon class="mdc-select__dropdown-icon-inactive" stroke="none"
                                            fill-rule="evenodd" points="7 10 12 15 17 10"></polygon>
                                        <polygon class="mdc-select__dropdown-icon-active" stroke="none"
                                            fill-rule="evenodd" points="7 15 12 10 17 15"></polygon>
                                    </svg>
                                </span>
                                <span class="mdc-line-ripple"></span>
                            </div>

                            <div class="mdc-select__menu mdc-menu mdc-menu-surface">
                                <ul class="mdc-list">
                                    <li class="mdc-list-item" data-value="md">
                                        <span class="mdc-list-item__ripple"></span>
                                        <span class="mdc-list-item__text">Markdown (.md)</span>
                                    </li>
                                    <li class="mdc-list-item" data-value="doc">
                                        <span class="mdc-list-item__ripple"></span>
                                        <span class="mdc-list-item__text">Word (.docx)</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Metadata Checkbox -->
                    <div class="setting-item" id="doc-metadata-container">
                        <div class="mdc-form-field">
                            <div class="mdc-checkbox">
                                <input type="checkbox" class="mdc-checkbox__native-control" id="doc-include-metadata" />
                                <div class="mdc-checkbox__background">
                                    <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24">
                                        <path class="mdc-checkbox__checkmark-path" fill="none"
                                            d="M1.73,12.91 8.1,19.28 22.79,4.59" />
                                    </svg>
                                    <div class="mdc-checkbox__mixedmark"></div>
                                </div>
                                <div class="mdc-checkbox__ripple"></div>
                            </div>
                            <label for="doc-include-metadata"
                                data-i18n="options_document_include_metadata_label">Include Metadata</label>
                        </div>
                    </div>

                    <hr class="mdc-list-divider">

                    <!-- Filename Config -->
                    <p class="mdc-typography--body2" data-i18n="options_filename_description">Drag and drop to reorder
                        filename parts. Uncheck to exclude.</p>
                    <ul id="doc-filename-parts-list" class="filename-parts-list">
                        <!-- Parts will be dynamically generated by options.js -->
                    </ul>
                    <div class="filename-preview-container">
                        <span class="mdc-typography--overline">Preview:</span>
                        <span id="doc-filename-preview" class="filename-preview"></span>
                    </div>
                </div>
            </div>

            <!-- MDC Snackbar for notifications -->
            <aside class="mdc-snackbar" id="app-snackbar">
                <div class="mdc-snackbar__surface" role="status" aria-relevant="additions">
                    <div class="mdc-snackbar__label" aria-atomic="false"></div>
                    <div class="mdc-snackbar__actions">
                        <button type="button" class="mdc-button mdc-snackbar__action">
                            <div class="mdc-button__ripple"></div>
                            <span class="mdc-button__label" data-i18n="snackbar_dismiss"></span>
                        </button>
                    </div>
                </div>
            </aside>

            <script src="../assets/vendor/material-components-web.min.js"></script>
            <script src="options.js" type="module"></script>
</body>

</html>